{"version":3,"file":"search-image-51e15dae.js","sources":["../../src/js/search-image.js"],"sourcesContent":["// Opisany w dokumentacji\nimport SimpleLightbox from \"simplelightbox\";\nimport iziToast from \"izitoast\"; \n// Opcjonalny import stylów\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\"#search-image-form\")\n\nclass URL {\n    #q\n    constructor(q) {\n      this.#q = q;\n    }\n    param = {\n        key: \"44950793-df63a62bcd1fce85415b89ba5\",\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        url: \"https://pixabay.com/api/\"\n    }\n    get addres() {\n        return this.param.url+\"?key=\"+this.param.key+\"&q=\"+this.#q+\"&image_type=\"\n                +this.param.image_type+\"&orientation=\"+this.param.orientation+\"&safesearch=\"+this.param.safesearch;\n      }\n}\n// webformatURL — link do małego obrazka, aby wyświetlić listę kart w galerii.\n// largeImageURL — link do dużego obrazu dla okna modalnego.\n// tags — tekst opisujący obraz. Nadaje się do atrybutu alt.\n// likes — liczba polubień.\n// views — liczba wyświetleń.\n// comments — liczba komentarzy.\n// downloads — liczba pobrań.\nconst createImage = ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads, ...otherProps })=>{\n    const li= document.createElement(\"li\")\n    li.classList.add(\"gallery-item\")\n    li.innerHTML=\n        `<a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img \n                class=\"gallery-image\" \n                src=\"${webformatURL}\" \n                alt=\"${tags}\"\n                titel=\"oooo\" \n            />\n            <div class=\"box\">\n                <div class=\"box-item\">\n                    <h3>Likes</h3>\n                    <p id=\"likes\">${likes}</p>\n                </div>\n                <div class=\"box-item\">\n                    <h3>Views</h3>\n                    <p id=\"views\">${views}</p>\n                </div>\n                <div class=\"box-item\">\n                    <h3>Comments</h3>\n                    <p id=\"comments\">${comments}</p>\n                </div>\n                <div class=\"box-item\">\n                    <h3>Downloads</h3>\n                    <p id=\"downloads\">${downloads}</p>\n                </div>\n            </div>\n        </a>`\n    return li\n}\nconst initImages = (images) => {\n    const imgs = images.map(createImage);\n    const fragment = document.createDocumentFragment();\n    fragment.append(...imgs)\n    return fragment\n}\n\nconst main = (root, images) =>{\n    document.querySelector(root).appendChild(initImages(images))\n}\n\n\n\n\nform.addEventListener(\"submit\", event => {\n    event.preventDefault();\n    const imgTitle = form.querySelector(\"#img\").value.trim()\n    const mesage = document.querySelector(\"#mesage\")\n\n    if ((imgTitle === \"\") & (mesage === null)) {\n        form.insertAdjacentHTML(\"afterend\", `<p id=\"mesage\" class=\"message\">Form field must be filled in!</p>`);\n    }\n\n    if (imgTitle !== \"\")  {\n        if (mesage !== null) mesage.remove();\n\n        const url = new URL(imgTitle)\n\n        if (document.querySelector(\"#gallery\").hasChildNodes()) {\n            const childs = document.querySelectorAll(\"#gallery > li\")\n            childs.forEach(child => {\n                child.remove();\n            });\n          }\n        const loader = document.querySelector(\"#loader\")\n        console.log(loader)\n        loader.classList.add(\"loader\")    \n        \n        fetch(url.addres)\n        .then(response => {\n          if (!response.ok) {\n            loader.classList.remove(\"loader\")\n            throw new Error(response.status);\n          }\n          loader.classList.remove(\"loader\")\n          return response.json();\n        })\n        .then(data => {\n          // Data handling\n            if (data.total===0) return iziToast.error({\n                                                        close: false,\n                                                        position:'topCenter',\n                                                        progressBar: false,\n                                                        backgroundColor: 'red',\n                                                        messageColor: 'white',\n                                                        timeout: 5000,\n                                                        message:\"Sorry, there are no images matching your search query. Please try again!\",\n                                                        transitionOut:'fadeOutUp',\n                                                        })\n\n            main(\"ul.gallery\",data.hits)\n            const lightbox = new SimpleLightbox('ul.gallery>li>a', { \n                captions: true,\n                captionType: \"attr\",\n                captionsData:\"alt\",\n                captionPosition: 'bottom',\n                captionDelay: 250,\n                overlay: true,\n             });\n        })\n        .catch(error => {\n          // Error handling\n            console.log(error);\n        });   \n    }\n    \n    form.reset();\n})\n\n\n\n\n"],"names":["form","URL","q","__privateAdd","_q","__publicField","__privateSet","__privateGet","createImage","webformatURL","largeImageURL","tags","likes","views","comments","downloads","otherProps","li","initImages","images","imgs","fragment","main","root","event","imgTitle","mesage","url","child","loader","response","data","iziToast","SimpleLightbox","error"],"mappings":"uiBAOA,MAAMA,EAAO,SAAS,cAAc,oBAAoB,QAExD,MAAMC,CAAI,CAEN,YAAYC,EAAG,CADfC,EAAA,KAAAC,EAAA,QAIAC,EAAA,aAAQ,CACJ,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,IAAK,0BACR,GARCC,EAAA,KAAKF,EAAKF,EACX,CAQD,IAAI,QAAS,CACT,OAAO,KAAK,MAAM,IAAI,QAAQ,KAAK,MAAM,IAAI,MAAMK,EAAA,KAAKH,GAAG,eAClD,KAAK,MAAM,WAAW,gBAAgB,KAAK,MAAM,YAAY,eAAe,KAAK,MAAM,UACjG,CACP,CAfIA,EAAA,YAuBJ,MAAMI,EAAc,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,GAAGC,CAAU,IAAK,CAC3G,MAAMC,EAAI,SAAS,cAAc,IAAI,EACrC,OAAAA,EAAG,UAAU,IAAI,cAAc,EAC/BA,EAAG,UACC,iCAAiCP,CAAa;AAAA;AAAA;AAAA,uBAG/BD,CAAY;AAAA,uBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAMSC,CAAK;AAAA;AAAA;AAAA;AAAA,oCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,uCAIFC,CAAQ;AAAA;AAAA;AAAA;AAAA,wCAIPC,CAAS;AAAA;AAAA;AAAA,cAItCE,CACX,EACMC,EAAcC,GAAW,CAC3B,MAAMC,EAAOD,EAAO,IAAIX,CAAW,EAC7Ba,EAAW,SAAS,yBAC1B,OAAAA,EAAS,OAAO,GAAGD,CAAI,EAChBC,CACX,EAEMC,EAAO,CAACC,EAAMJ,IAAU,CAC1B,SAAS,cAAcI,CAAI,EAAE,YAAYL,EAAWC,CAAM,CAAC,CAC/D,EAKAnB,EAAK,iBAAiB,SAAUwB,GAAS,CACrCA,EAAM,eAAc,EACpB,MAAMC,EAAWzB,EAAK,cAAc,MAAM,EAAE,MAAM,KAAM,EAClD0B,EAAS,SAAS,cAAc,SAAS,EAM/C,GAJKD,IAAa,GAAOC,IAAW,MAChC1B,EAAK,mBAAmB,WAAY,kEAAkE,EAGtGyB,IAAa,GAAK,CACdC,IAAW,MAAMA,EAAO,OAAM,EAElC,MAAMC,EAAM,IAAI1B,EAAIwB,CAAQ,EAExB,SAAS,cAAc,UAAU,EAAE,cAAa,GACjC,SAAS,iBAAiB,eAAe,EACjD,QAAQG,GAAS,CACpBA,EAAM,OAAM,CAC5B,CAAa,EAEL,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/C,QAAQ,IAAIA,CAAM,EAClBA,EAAO,UAAU,IAAI,QAAQ,EAE7B,MAAMF,EAAI,MAAM,EACf,KAAKG,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAAD,EAAO,UAAU,OAAO,QAAQ,EAC1B,IAAI,MAAMC,EAAS,MAAM,EAEjC,OAAAD,EAAO,UAAU,OAAO,QAAQ,EACzBC,EAAS,MAC1B,CAAS,EACA,KAAKC,GAAQ,CAEV,GAAIA,EAAK,QAAQ,EAAG,OAAOC,EAAS,MAAM,CACE,MAAO,GACP,SAAS,YACT,YAAa,GACb,gBAAiB,MACjB,aAAc,QACd,QAAS,IACT,QAAQ,2EACR,cAAc,WACtE,CAAyD,EAE7CV,EAAK,aAAaS,EAAK,IAAI,EACV,IAAIE,EAAe,kBAAmB,CACnD,SAAU,GACV,YAAa,OACb,aAAa,MACb,gBAAiB,SACjB,aAAc,IACd,QAAS,EACzB,CAAc,CACd,CAAS,EACA,MAAMC,GAAS,CAEZ,QAAQ,IAAIA,CAAK,CAC7B,CAAS,CACJ,CAEDlC,EAAK,MAAK,CACd,CAAC"}